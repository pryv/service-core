/**
 * @license
 * Copyright (C) 2020 Pryv S.A. https://pryv.com - All Rights Reserved
 * Unauthorized copying of this file, via any medium is strictly prohibited
 * Proprietary and confidential
 */
const path = require('path');

const {
  gifnoc,
  getReggol,
  getGifnoc
} = require('../src').init({
  appName: 'sample',
  baseConfigDir: path.resolve(__dirname, './configs'),
  extraConfigFiles: [{
    scope: 'extra1',
    file: path.resolve(__dirname, './configs/extra-config.yaml')
  }],
  extraConfigRemotes: [{
    scope: 'pryv.li',
    url: 'https://reg.pryv.li/service/info'
  }, {
    scope: 'pryv.me',
    key: 'service',
    url: 'https://reg.pryv.me/service/info'
  }, {
    scope: 'pryv.me-def',
    key: 'definitions',
    fromKey: 'service:assets:definitions'
  }]
}, function () {
  console.log('Ready');
});

const rootLogger = getReggol();
rootLogger.debug('hello root');
const indexLogger = getReggol('index');
indexLogger.debug('hello index');
indexLogger.info('Bob', gifnoc.get('foo'));
const subLogger = indexLogger.getReggol('sub');
subLogger.debug('hello sub');

(async () => {
  await getGifnoc();
  indexLogger.info('pryv.li serial', gifnoc.get('serial'));
  indexLogger.info('pryv.me name', gifnoc.get('service:name'));
  indexLogger.info('Favicon', gifnoc.get('definitions:favicon:default:url'));
})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvbXBvbmVudHMvYm9pbGVyL2V4YW1wbGUvaW5kZXguanMiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJnaWZub2MiLCJnZXRSZWdnb2wiLCJnZXRHaWZub2MiLCJpbml0IiwiYXBwTmFtZSIsImJhc2VDb25maWdEaXIiLCJyZXNvbHZlIiwiX19kaXJuYW1lIiwiZXh0cmFDb25maWdGaWxlcyIsInNjb3BlIiwiZmlsZSIsImV4dHJhQ29uZmlnUmVtb3RlcyIsInVybCIsImtleSIsImZyb21LZXkiLCJjb25zb2xlIiwibG9nIiwicm9vdExvZ2dlciIsImRlYnVnIiwiaW5kZXhMb2dnZXIiLCJpbmZvIiwiZ2V0Iiwic3ViTG9nZ2VyIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQXBCOztBQUNBLE1BQU07QUFBQ0MsRUFBQUEsTUFBRDtBQUFTQyxFQUFBQSxTQUFUO0FBQW9CQyxFQUFBQTtBQUFwQixJQUFpQ0gsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkksSUFBbEIsQ0FBdUI7QUFDNURDLEVBQUFBLE9BQU8sRUFBRSxRQURtRDtBQUU1REMsRUFBQUEsYUFBYSxFQUFFUCxJQUFJLENBQUNRLE9BQUwsQ0FBYUMsU0FBYixFQUF3QixXQUF4QixDQUY2QztBQUc1REMsRUFBQUEsZ0JBQWdCLEVBQUUsQ0FBQztBQUNqQkMsSUFBQUEsS0FBSyxFQUFFLFFBRFU7QUFFakJDLElBQUFBLElBQUksRUFBRVosSUFBSSxDQUFDUSxPQUFMLENBQWFDLFNBQWIsRUFBd0IsNkJBQXhCO0FBRlcsR0FBRCxDQUgwQztBQU81REksRUFBQUEsa0JBQWtCLEVBQUUsQ0FBQztBQUNuQkYsSUFBQUEsS0FBSyxFQUFFLFNBRFk7QUFFbkJHLElBQUFBLEdBQUcsRUFBRTtBQUZjLEdBQUQsRUFHbEI7QUFDQUgsSUFBQUEsS0FBSyxFQUFFLFNBRFA7QUFFQUksSUFBQUEsR0FBRyxFQUFFLFNBRkw7QUFHQUQsSUFBQUEsR0FBRyxFQUFFO0FBSEwsR0FIa0IsRUFPbEI7QUFDQUgsSUFBQUEsS0FBSyxFQUFFLGFBRFA7QUFFQUksSUFBQUEsR0FBRyxFQUFFLGFBRkw7QUFHQUMsSUFBQUEsT0FBTyxFQUFFO0FBSFQsR0FQa0I7QUFQd0MsQ0FBdkIsRUFtQnBDLFlBQVc7QUFDWkMsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBWjtBQUNELENBckJzQyxDQUF2Qzs7QUF3QkEsTUFBTUMsVUFBVSxHQUFHaEIsU0FBUyxFQUE1QjtBQUNBZ0IsVUFBVSxDQUFDQyxLQUFYLENBQWlCLFlBQWpCO0FBR0EsTUFBTUMsV0FBVyxHQUFHbEIsU0FBUyxDQUFDLE9BQUQsQ0FBN0I7QUFDQWtCLFdBQVcsQ0FBQ0QsS0FBWixDQUFrQixhQUFsQjtBQUNBQyxXQUFXLENBQUNDLElBQVosQ0FBaUIsS0FBakIsRUFBd0JwQixNQUFNLENBQUNxQixHQUFQLENBQVcsS0FBWCxDQUF4QjtBQUVBLE1BQU1DLFNBQVMsR0FBR0gsV0FBVyxDQUFDbEIsU0FBWixDQUFzQixLQUF0QixDQUFsQjtBQUNBcUIsU0FBUyxDQUFDSixLQUFWLENBQWdCLFdBQWhCOztBQUVBLENBQUMsWUFBWTtBQUNYLFFBQU1oQixTQUFTLEVBQWY7QUFDQWlCLEVBQUFBLFdBQVcsQ0FBQ0MsSUFBWixDQUFpQixnQkFBakIsRUFBbUNwQixNQUFNLENBQUNxQixHQUFQLENBQVcsUUFBWCxDQUFuQztBQUNBRixFQUFBQSxXQUFXLENBQUNDLElBQVosQ0FBaUIsY0FBakIsRUFBaUNwQixNQUFNLENBQUNxQixHQUFQLENBQVcsY0FBWCxDQUFqQztBQUNBRixFQUFBQSxXQUFXLENBQUNDLElBQVosQ0FBaUIsU0FBakIsRUFBNEJwQixNQUFNLENBQUNxQixHQUFQLENBQVcsaUNBQVgsQ0FBNUI7QUFDRCxDQUxEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChDKSAyMDIwIFByeXYgUy5BLiBodHRwczovL3ByeXYuY29tIC0gQWxsIFJpZ2h0cyBSZXNlcnZlZFxuICogVW5hdXRob3JpemVkIGNvcHlpbmcgb2YgdGhpcyBmaWxlLCB2aWEgYW55IG1lZGl1bSBpcyBzdHJpY3RseSBwcm9oaWJpdGVkXG4gKiBQcm9wcmlldGFyeSBhbmQgY29uZmlkZW50aWFsXG4gKi9cbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5jb25zdCB7Z2lmbm9jLCBnZXRSZWdnb2wsIGdldEdpZm5vY30gPSByZXF1aXJlKCcuLi9zcmMnKS5pbml0KHtcbiAgYXBwTmFtZTogJ3NhbXBsZScsXG4gIGJhc2VDb25maWdEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuL2NvbmZpZ3MnKSxcbiAgZXh0cmFDb25maWdGaWxlczogW3tcbiAgICBzY29wZTogJ2V4dHJhMScsXG4gICAgZmlsZTogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJy4vY29uZmlncy9leHRyYS1jb25maWcueWFtbCcpXG4gIH1dLFxuICBleHRyYUNvbmZpZ1JlbW90ZXM6IFt7XG4gICAgc2NvcGU6ICdwcnl2LmxpJyxcbiAgICB1cmw6ICdodHRwczovL3JlZy5wcnl2LmxpL3NlcnZpY2UvaW5mbydcbiAgfSx7XG4gICAgc2NvcGU6ICdwcnl2Lm1lJyxcbiAgICBrZXk6ICdzZXJ2aWNlJyxcbiAgICB1cmw6ICdodHRwczovL3JlZy5wcnl2Lm1lL3NlcnZpY2UvaW5mbydcbiAgfSx7XG4gICAgc2NvcGU6ICdwcnl2Lm1lLWRlZicsXG4gICAga2V5OiAnZGVmaW5pdGlvbnMnLFxuICAgIGZyb21LZXk6ICdzZXJ2aWNlOmFzc2V0czpkZWZpbml0aW9ucydcbiAgfV1cbn0sIGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnUmVhZHknKTtcbn0pO1xuXG5cbmNvbnN0IHJvb3RMb2dnZXIgPSBnZXRSZWdnb2woKTtcbnJvb3RMb2dnZXIuZGVidWcoJ2hlbGxvIHJvb3QnKTtcblxuXG5jb25zdCBpbmRleExvZ2dlciA9IGdldFJlZ2dvbCgnaW5kZXgnKTtcbmluZGV4TG9nZ2VyLmRlYnVnKCdoZWxsbyBpbmRleCcpO1xuaW5kZXhMb2dnZXIuaW5mbygnQm9iJywgZ2lmbm9jLmdldCgnZm9vJykpO1xuXG5jb25zdCBzdWJMb2dnZXIgPSBpbmRleExvZ2dlci5nZXRSZWdnb2woJ3N1YicpO1xuc3ViTG9nZ2VyLmRlYnVnKCdoZWxsbyBzdWInKTtcblxuKGFzeW5jICgpID0+IHvCoFxuICBhd2FpdCBnZXRHaWZub2MoKTtcbiAgaW5kZXhMb2dnZXIuaW5mbygncHJ5di5saSBzZXJpYWwnLCBnaWZub2MuZ2V0KCdzZXJpYWwnKSk7XG4gIGluZGV4TG9nZ2VyLmluZm8oJ3ByeXYubWUgbmFtZScsIGdpZm5vYy5nZXQoJ3NlcnZpY2U6bmFtZScpKTtcbiAgaW5kZXhMb2dnZXIuaW5mbygnRmF2aWNvbicsIGdpZm5vYy5nZXQoJ2RlZmluaXRpb25zOmZhdmljb246ZGVmYXVsdDp1cmwnKSk7XG59KSgpOyJdfQ==
//# sourceMappingURL=index.js.map